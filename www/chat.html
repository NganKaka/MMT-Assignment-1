<!-- <!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Messenger Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="chat-screen">
        <div class="sidebar">
            <div class="sidebar-header">
                <h3>Äoáº¡n chat</h3>
            </div>
            <div class="online-list-container">
                <ul id="peer-list">
                    </ul>
            </div>
        </div>

        <div class="main-chat">
            <div class="chat-header">
                <div class="chat-info">
                    <h4 id="current-user-display">Äang táº£i...</h4>
                    <span class="active-status">â— Äang hoáº¡t Ä‘á»™ng</span>
                </div>
            </div>

            <div id="message-window" class="message-area">
                <div class="system-msg">ChÃ o má»«ng Ä‘áº¿n vá»›i há»‡ thá»‘ng Chat P2P Hybrid</div>
            </div>

            <div class="chat-footer">
                <input type="text" id="msg-input" placeholder="Nháº­p tin nháº¯n..." onkeypress="handleEnter(event)">
                <button class="send-btn" onclick="sendMessage()">Gá»­i</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Kiá»ƒm tra xem Ä‘Ã£ Ä‘Äƒng nháº­p chÆ°a
        const user = localStorage.getItem('chat_username');
        if (!user) {
            alert("Báº¡n chÆ°a Ä‘Äƒng nháº­p! Quay láº¡i trang login.");
            window.location.href = "/login.html";
        } else {
            document.getElementById('current-user-display').innerText = user;
            // Gá»i hÃ m khá»Ÿi Ä‘á»™ng trong script.js
            startChatApp(user);
        }

        function handleEnter(e) {
            if (e.key === 'Enter') sendMessage();
        }
    </script>
</body>
</html> -->






<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Messenger Chat Hybrid</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .section-title { padding: 10px 15px; font-size: 12px; color: #666; font-weight: bold; background: #eee; text-transform: uppercase; }
        #fixed-channel-list, #peer-list { list-style: none; padding: 0; }
        
        .peer-item { padding: 15px; cursor: pointer; border-bottom: 1px solid #f0f0f0; transition: 0.2s; }
        .peer-item:hover { background-color: #f0f2f5; }
        .peer-item.active { background-color: #e6f2ff; border-left: 4px solid #0084ff; font-weight: bold; }
        .peer-item::before { content: 'ğŸ‘¤ '; }

        .channel-item { padding: 15px; cursor: pointer; border-bottom: 1px solid #f0f0f0; background: #fafafa; }
        .channel-item:hover { background-color: #f0f2f5; }
        .channel-item.active { background-color: #e6f2ff; border-left: 4px solid #0084ff; font-weight: bold; }
        .channel-item::before { content: 'ğŸ“¢ '; }
    </style>
</head>
<body>
    <div id="chat-screen">
        <div class="sidebar">
            <div class="sidebar-header">
                <h3>WeApRous Chat</h3>
            </div>
            
            <div class="online-list-container">
                <!-- KÃªnh Chung -->
                <div class="section-title">KÃªnh Chung</div>
                <ul id="fixed-channel-list">
                    <!-- Máº·c Ä‘á»‹nh cÃ³ 1 kÃªnh General -->
                    <li class="channel-item" onclick="switchChat('General', 'channel')">General</li>
                </ul>

                <!-- Danh sÃ¡ch NgÆ°á»i dÃ¹ng -->
                <div class="section-title">NgÆ°á»i dÃ¹ng Online</div>
                <ul id="peer-list"></ul>
            </div>
        </div>

        <div class="main-chat">
            <div class="chat-header">
                <div class="chat-info">
                    <h4 id="current-user-display">Äang táº£i...</h4>
                    <span class="active-status">â— Äang hoáº¡t Ä‘á»™ng</span>
                </div>
            </div>

            <div id="message-window" class="message-area">
                <div class="system-msg">ChÃ o má»«ng! Chá»n ngÆ°á»i dÃ¹ng Ä‘á»ƒ chat riÃªng hoáº·c General Ä‘á»ƒ chat chung.</div>
            </div>

            <div class="chat-footer">
                <input type="text" id="msg-input" placeholder="Nháº­p tin nháº¯n..." onkeypress="handleEnter(event)">
                <button class="send-btn" onclick="sendMessage()">Gá»­i</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        const user = localStorage.getItem('chat_username');
        if (!user) {
            window.location.href = "/login.html";
        } else {
            document.getElementById('current-user-display').innerText = `TÃ´i: ${user}`;
            startChatApp(user);
        }

        function handleEnter(e) {
            if (e.key === 'Enter') sendMessage();
        }
    </script>
</body>
</html>